Add missing test for division by zero

--- codels/rmp400MotionTaskCodels.c
+++ codels/rmp400MotionTaskCodels.c
@@ -565,7 +565,7 @@ control_yaw(int *report, double t, double vel_reference, double yawr_reference,
 			}
 		} else
 		{
-			const double ref_ratio = 1./1.5;
+			const double ref_ratio = 1.5;
 			const double noise_th = 0.1;
 			
 			// if changing sign or increasing from around 0
@@ -580,7 +580,7 @@ control_yaw(int *report, double t, double vel_reference, double yawr_reference,
 			// then directly apply extrapolated command
 			if ((fabs(data->prev_reference) >= noise_th) &&
 			    (yawr_reference*data->prev_reference > 0) &&
-			    ((yawr_reference/data->prev_reference < ref_ratio) || (data->prev_reference/yawr_reference < ref_ratio)))
+			    ((yawr_reference/data->prev_reference > ref_ratio) || (data->prev_reference/yawr_reference > ref_ratio)))
 			{
 				*yawr_command = data->prev_command * yawr_reference / data->prev_reference;
 				data->jump_t = t;
@@ -599,7 +599,7 @@ control_yaw(int *report, double t, double vel_reference, double yawr_reference,
 			// then we have to follow the reference changes
 			if (t != data->jump_t)
 			{
-				if (fabs(yawr_reference - data->prev_reference) < 1e-10)
+				if (fabs(data->prev_reference) < noise_th || fabs(yawr_reference - data->prev_reference) < 1e-10)
 					*yawr_command = data->prev_command;
 				else
 					*yawr_command = data->prev_command * yawr_reference / data->prev_reference;

