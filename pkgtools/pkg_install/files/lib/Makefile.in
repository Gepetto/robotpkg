# $NetBSD: Makefile.in,v 1.13 2006/08/19 14:38:52 schwarz Exp $

srcdir=		@srcdir@

pkgdbdir=	@pkgdbdir@
mandir=		@mandir@

man5dir=	$(mandir)/man5
cat5dir=	$(mandir)/cat5

tar=		@tar@
ftp=		@ftp@

RANLIB=		@RANLIB@
AR=		@AR@
CC=		@CC@
CPPFLAGS=	@CPPFLAGS@ -I. -I$(srcdir)
DEFS=		@DEFS@ -DDEF_LOG_DIR=\"$(pkgdbdir)\" -DTAR_CMD=\"$(tar)\" -DFTP_CMD=\"$(ftp)\"
CFLAGS=		@CFLAGS@

INSTALL=	@INSTALL@

LIB=	libinstall.a

OBJS=	automatic.o dewey.o fexec.o file.o ftpio.o global.o lpkg.o path.o pen.o \
	pexec.o pkgdb.o plist.o str.o var.o version.o

all: $(LIB)

.c.o:
	$(CC) $(DEFS) $(CPPFLAGS) $(CFLAGS) -c $<

$(LIB): $(OBJS)
	$(AR) crv $@ $(OBJS)
	$(RANLIB) $@

clean:
	rm -f $(OBJS) $(LIB)

install:
	$(INSTALL) -m 755 -d $(man5dir)
	$(INSTALL) -m 755 -d $(cat5dir)
	$(INSTALL) -m 444 pkg_summary.5 $(man5dir)/pkg_summary.5
	$(INSTALL) -m 444 pkg_summary.cat5 $(cat5dir)/pkg_summary.0
