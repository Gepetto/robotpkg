From c7b8157d74fc4b26252db444fef16733dde5bbca Mon Sep 17 00:00:00 2001
From: Guilhem Saurel <guilhem.saurel@laas.fr>
Date: Sat, 25 Apr 2020 02:40:31 +0200
Subject: [PATCH] fix old dIntegrate API

---
 src/algorithm/joint-configuration.hpp         | 2 +-
 src/multibody/liegroup/cartesian-product.hpp  | 4 ++--
 src/multibody/liegroup/liegroup-base.hpp      | 4 ++--
 src/multibody/liegroup/special-euclidean.hpp  | 8 ++++----
 src/multibody/liegroup/special-orthogonal.hpp | 8 ++++----
 src/multibody/liegroup/vector-space.hpp       | 4 ++--
 6 files changed, 15 insertions(+), 15 deletions(-)

diff --git a/src/algorithm/joint-configuration.hpp b/src/algorithm/joint-configuration.hpp
index 3f0f87b9..43ac12cc 100644
--- src/algorithm/joint-configuration.hpp
+++ src/algorithm/joint-configuration.hpp
@@ -284,7 +284,7 @@ namespace pinocchio
                   const Eigen::MatrixBase<TangentVectorType> & v,
                   const Eigen::MatrixBase<JacobianMatrixType> & J,
                   const ArgumentPosition arg,
-                  const AssignmentOperatorType op);
+                  const AssignmentOperatorType op=SETTO);
 
   /**
    *
diff --git a/src/multibody/liegroup/cartesian-product.hpp b/src/multibody/liegroup/cartesian-product.hpp
index 4d6e493e..18d10b1a 100644
--- src/multibody/liegroup/cartesian-product.hpp
+++ src/multibody/liegroup/cartesian-product.hpp
@@ -126,7 +126,7 @@ namespace pinocchio
     void dIntegrate_dq_impl(const Eigen::MatrixBase<Config_t > & q,
                             const Eigen::MatrixBase<Tangent_t> & v,
                             const Eigen::MatrixBase<JacobianOut_t> & J,
-                            const AssignmentOperatorType op) const
+                            const AssignmentOperatorType op=SETTO) const
     {
       switch(op)
         {
@@ -154,7 +154,7 @@ namespace pinocchio
     void dIntegrate_dv_impl(const Eigen::MatrixBase<Config_t > & q,
                             const Eigen::MatrixBase<Tangent_t> & v,
                             const Eigen::MatrixBase<JacobianOut_t> & J,
-                            const AssignmentOperatorType op) const
+                            const AssignmentOperatorType op=SETTO) const
     {
       switch(op)
         {
diff --git a/src/multibody/liegroup/liegroup-base.hpp b/src/multibody/liegroup/liegroup-base.hpp
index 5cdbd0a2..cc02c168 100644
--- src/multibody/liegroup/liegroup-base.hpp
+++ src/multibody/liegroup/liegroup-base.hpp
@@ -135,7 +135,7 @@ PINOCCHIO_LIE_GROUP_PUBLIC_INTERFACE_GENERIC(Derived,typename)
     void dIntegrate_dq(const Eigen::MatrixBase<Config_t >  & q,
                        const Eigen::MatrixBase<Tangent_t>  & v,
                        const Eigen::MatrixBase<JacobianOut_t> & J,
-                       const AssignmentOperatorType op) const;
+                       const AssignmentOperatorType op=SETTO) const;
 
     /**
      * @brief      Computes the Jacobian of a small variation of the tangent vector into tangent space at identity.
@@ -152,7 +152,7 @@ PINOCCHIO_LIE_GROUP_PUBLIC_INTERFACE_GENERIC(Derived,typename)
     void dIntegrate_dv(const Eigen::MatrixBase<Config_t >  & q,
                        const Eigen::MatrixBase<Tangent_t>  & v,
                        const Eigen::MatrixBase<JacobianOut_t> & J,
-                       const AssignmentOperatorType op) const;
+                       const AssignmentOperatorType op=SETTO) const;
 
 
     /**
diff --git a/src/multibody/liegroup/special-euclidean.hpp b/src/multibody/liegroup/special-euclidean.hpp
index e492c7dd..796be171 100644
--- src/multibody/liegroup/special-euclidean.hpp
+++ src/multibody/liegroup/special-euclidean.hpp
@@ -296,7 +296,7 @@ namespace pinocchio
     static void dIntegrate_dq_impl(const Eigen::MatrixBase<Config_t >  & /*q*/,
                                    const Eigen::MatrixBase<Tangent_t>  & v,
                                    const Eigen::MatrixBase<JacobianOut_t>& J,
-                                   const AssignmentOperatorType op)
+                                   const AssignmentOperatorType op=SETTO)
     {
       JacobianOut_t & Jout = PINOCCHIO_EIGEN_CONST_CAST(JacobianOut_t,J);
 
@@ -311,7 +311,7 @@ namespace pinocchio
     static void dIntegrate_dv_impl(const Eigen::MatrixBase<Config_t > & /*q*/,
                                    const Eigen::MatrixBase<Tangent_t> & v,
                                    const Eigen::MatrixBase<JacobianOut_t> & J,
-                                   const AssignmentOperatorType op)
+                                   const AssignmentOperatorType op=SETTO)
     {
       JacobianOut_t & Jout = PINOCCHIO_EIGEN_CONST_CAST(JacobianOut_t,J);
       // TODO sparse version
@@ -651,7 +651,7 @@ namespace pinocchio
     static void dIntegrate_dq_impl(const Eigen::MatrixBase<Config_t >  & /*q*/,
                                    const Eigen::MatrixBase<Tangent_t>  & v,
                                    const Eigen::MatrixBase<JacobianOut_t>& J,
-                                   const AssignmentOperatorType op)
+                                   const AssignmentOperatorType op=SETTO)
     {
       JacobianOut_t & Jout = PINOCCHIO_EIGEN_CONST_CAST(JacobianOut_t,J);
 
@@ -676,7 +676,7 @@ namespace pinocchio
     static void dIntegrate_dv_impl(const Eigen::MatrixBase<Config_t >  & /*q*/,
                                    const Eigen::MatrixBase<Tangent_t>  & v,
                                    const Eigen::MatrixBase<JacobianOut_t>& J,
-                                   const AssignmentOperatorType op)
+                                   const AssignmentOperatorType op=SETTO)
     {
       switch(op)
       {
diff --git a/src/multibody/liegroup/special-orthogonal.hpp b/src/multibody/liegroup/special-orthogonal.hpp
index b340abc3..d036f15a 100644
--- src/multibody/liegroup/special-orthogonal.hpp
+++ src/multibody/liegroup/special-orthogonal.hpp
@@ -191,7 +191,7 @@ namespace pinocchio
     static void dIntegrate_dq_impl(const Eigen::MatrixBase<Config_t > & /*q*/,
                                    const Eigen::MatrixBase<Tangent_t> & /*v*/,
                                    const Eigen::MatrixBase<JacobianOut_t> & J,
-                                   const AssignmentOperatorType op)
+                                   const AssignmentOperatorType op=SETTO)
     {
       JacobianOut_t & Jout = PINOCCHIO_EIGEN_CONST_CAST(JacobianOut_t,J);
       switch(op)
@@ -215,7 +215,7 @@ namespace pinocchio
     static void dIntegrate_dv_impl(const Eigen::MatrixBase<Config_t > & /*q*/,
                                    const Eigen::MatrixBase<Tangent_t> & /*v*/,
                                    const Eigen::MatrixBase<JacobianOut_t> & J,
-                                   const AssignmentOperatorType op)
+                                   const AssignmentOperatorType op=SETTO)
     {
       JacobianOut_t & Jout = PINOCCHIO_EIGEN_CONST_CAST(JacobianOut_t,J);
       switch(op)
@@ -449,7 +449,7 @@ namespace pinocchio
     static void dIntegrate_dq_impl(const Eigen::MatrixBase<Config_t >  & /*q*/,
                                    const Eigen::MatrixBase<Tangent_t>  & v,
                                    const Eigen::MatrixBase<JacobianOut_t> & J,
-                                   const AssignmentOperatorType op)
+                                   const AssignmentOperatorType op=SETTO)
     {
       JacobianOut_t & Jout = PINOCCHIO_EIGEN_CONST_CAST(JacobianOut_t,J);
       switch(op)
@@ -473,7 +473,7 @@ namespace pinocchio
     static void dIntegrate_dv_impl(const Eigen::MatrixBase<Config_t > & /*q*/,
                                    const Eigen::MatrixBase<Tangent_t> & v,
                                    const Eigen::MatrixBase<JacobianOut_t> & J,
-                                   const AssignmentOperatorType op)
+                                   const AssignmentOperatorType op=SETTO)
     {
       switch(op)
         {
diff --git a/src/multibody/liegroup/vector-space.hpp b/src/multibody/liegroup/vector-space.hpp
index 8b12deb3..d7b13f4d 100644
--- src/multibody/liegroup/vector-space.hpp
+++ src/multibody/liegroup/vector-space.hpp
@@ -106,7 +106,7 @@ namespace pinocchio
     static void dIntegrate_dq_impl(const Eigen::MatrixBase<Config_t > & /*q*/,
                                    const Eigen::MatrixBase<Tangent_t> & /*v*/,
                                    const Eigen::MatrixBase<JacobianOut_t> & J,
-                                   const AssignmentOperatorType op)
+                                   const AssignmentOperatorType op=SETTO)
     {
       Eigen::MatrixBase<JacobianOut_t>& Jout = PINOCCHIO_EIGEN_CONST_CAST(JacobianOut_t,J);
       switch(op)
@@ -130,7 +130,7 @@ namespace pinocchio
     static void dIntegrate_dv_impl(const Eigen::MatrixBase<Config_t > & /*q*/,
                                    const Eigen::MatrixBase<Tangent_t> & /*v*/,
                                    const Eigen::MatrixBase<JacobianOut_t> & J,
-                                   const AssignmentOperatorType op)
+                                   const AssignmentOperatorType op=SETTO)
     {
       Eigen::MatrixBase<JacobianOut_t>& Jout = PINOCCHIO_EIGEN_CONST_CAST(JacobianOut_t,J);
       switch(op)
-- 
2.26.2

